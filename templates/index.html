<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - TinyDB Ph√¢n t√°n</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <h1>Dashboard - Prototype TinyDB Ph√¢n t√°n üöÄ</h1>
    </header>

    <div class="container">
        <aside class="sidebar">
            <div class="card">
                <h2>Tr·∫°ng th√°i h·ªá th·ªëng</h2>
                <ul class="node-status-list">
                    {% for node in nodes %}
                        <li>
                            <span class="status-dot online"></span>
                            <span class="node-role">{{ node.role }}</span>
                            <span class="node-url">{{ node.url }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </aside>

        <main class="main-content">
            
            {% if message %}
                <div class="message {{ message_type }}">{{ message }}</div>
            {% endif %}

            <div class="features-grid">
                <div class="card">
                    <h2>T√≠nh nƒÉng 1: Sao ch√©p (Leader-Follower)</h2>
                    <p>Th√™m b·∫£n ghi m·ªõi. D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c ghi v√†o Leader v√† sao ch√©p ƒë·∫øn t·∫•t c·∫£ Follower.</p>
                    <form action="/insert" method="POST" class="feature-form">
                        <label for="name">T√™n:</label>
                        <input type="text" id="name" name="name" required>
                        
                        <label for="age">Tu·ªïi:</label>
                        <input type="number" id="age" name="age" required>
                        
                        <label for="city">Th√†nh ph·ªë:</label>
                        <input type="text" id="city" name="city" placeholder="V√≠ d·ª•: Paris" required>
                        
                        <button type="submit">Ch√®n (Insert)</button>
                    </form>
                </div>

                <div class="card">
                    <h2>T√≠nh nƒÉng 2: Truy v·∫•n song song (Scatter-Gather)</h2>
                    <p>T√¨m ki·∫øm tr√™n t·∫•t c·∫£ c√°c n√∫t. ƒêi·ªÅn c√°c tr∆∞·ªùng mu·ªën l·ªçc (t√¨m ki·∫øm AND).</p>
                    <form action="/search" method="POST" class="feature-form">
                        
                        <label for="search_name">T√™n (ch·ª©a):</label>
                        <input type="text" id="search_name" name="name" placeholder="V√≠ d·ª•: Alice">
                
                        <label for="search_age">Tu·ªïi (b·∫±ng):</label>
                        <input type="number" id="search_age" name="age" placeholder="V√≠ d·ª•: 25">
                
                        <label for="search_city">Th√†nh ph·ªë (ch·ª©a):</label>
                        <input type="text" id="search_city" name="city" placeholder="V√≠ d·ª•: London">
                        
                        <button type="submit">T√¨m ki·∫øm (Search)</button>
                    </form>
                </div>
            </div>

            {% if results is not none %}
                <div class="card results-card">
                    <h2>K·∫øt qu·∫£ t√¨m ki·∫øm: ({{ results|length }} b·∫£n ghi)</h2>
                    {% if results %}
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Ngu·ªìn (Node)</th> <th>T√™n</th>
                                    <th>Tu·ªïi</th>
                                    <th>Th√†nh ph·ªë</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in results %}
                                    <tr class="source-{{ item.source_node | replace(' ', '-') | replace('(', '') | replace(')', '') | lower }}">
                                        <td class="node-source-cell">
                                            <span class="node-badge">{{ item.source_node }}</span>
                                        </td>
                                        <td>{{ item.name }}</td>
                                        <td>{{ item.age }}</td>
                                        <td>{{ item.city }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <p>Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ n√†o cho truy v·∫•n n√†y.</p>
                    {% endif %}
                </div>
            {% endif %}
        </main>
    </div>
</body>
</html>